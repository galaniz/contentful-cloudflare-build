'use strict';

Object.defineProperty(exports, '__esModule', { value: true });

var emotion = require('emotion');
var P = require('react');
var f36Core = require('@contentful/f36-core');
var a = require('@contentful/f36-tokens');
var f36Typography = require('@contentful/f36-typography');
var f36Icons = require('@contentful/f36-icons');

function _interopDefaultLegacy (e) { return e && typeof e === 'object' && 'default' in e ? e : { 'default': e }; }

var P__default = /*#__PURE__*/_interopDefaultLegacy(P);
var a__default = /*#__PURE__*/_interopDefaultLegacy(a);

var se=Object.defineProperty,pe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var W=(e,t,o)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,n=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&W(e,o,t[o]);if(C)for(var o of C(t))O.call(t,o)&&W(e,o,t[o]);return e},s=(e,t)=>pe(e,ie(t));var d=(e,t)=>{var o={};for(var r in e)$.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&C)for(var r of C(e))t.indexOf(r)<0&&O.call(e,r)&&(o[r]=e[r]);return o};var z=()=>({inline:emotion.css({borderRadius:a__default["default"].borderRadiusMedium,boxShadow:`0 0 0 1px ${a__default["default"].gray200}`,"th:first-child":{borderTopLeftRadius:a__default["default"].borderRadiusMedium},"th:last-child":{borderTopRightRadius:a__default["default"].borderRadiusMedium},"tr:last-child td:first-child":{borderBottomLeftRadius:a__default["default"].borderRadiusMedium},"tr:last-child td:last-child":{borderBottomRightRadius:a__default["default"].borderRadiusMedium}}),embedded:emotion.css({borderBottom:`1px solid ${a__default["default"].gray200}`}),root:emotion.css({width:"100%"})});var F=P.createContext({}),K=()=>P.useContext(F),G=F.Provider;var E=P.forwardRef((T,i)=>{var m=T,{children:e,className:t,layout:o="inline",testId:r="cf-ui-table",verticalAlign:l="top"}=m,p=d(m,["children","className","layout","testId","verticalAlign"]);let b=z();return P__default["default"].createElement(f36Core.Box,s(n({cellPadding:"0",cellSpacing:"0"},p),{as:"table",display:"table",ref:i,className:emotion.cx(b.root,b[o],t),testId:r}),P__default["default"].createElement(G,{value:{verticalAlign:l}},e))});E.displayName="Table";function V(p,l){var i=p,{className:e,children:t,testId:o="cf-ui-table-body"}=i,r=d(i,["className","children","testId"]);return P__default["default"].createElement(f36Core.Box,s(n({},r),{as:"tbody",className:e,ref:l,testId:o}),t)}V.displayName="TableBody";var H=P.forwardRef(V);var u={body:{name:"body",as:"td",offsetTop:0},head:{name:"head",as:"th",offsetTop:0}},I=P.createContext(u.body),M=()=>P.useContext(I),v=I.Provider;var _=({align:e,isSortable:t,isTableHead:o,sortDirection:r,verticalAlign:l})=>({button:emotion.css({alignItems:"flex-start",appearance:"none",background:"none",border:0,color:r?a__default["default"].gray900:"inherit",cursor:"pointer",display:"inline-flex",gap:a__default["default"].spacing2Xs,outline:0,padding:a__default["default"].spacingS,"&:focus":{backgroundColor:a__default["default"].gray100,boxShadow:a__default["default"].glowPrimary},"&:focus:not(:focus-visible)":{backgroundColor:"unset",boxShadow:"unset"},"&:focus-visible":{backgroundColor:a__default["default"].gray100,boxShadow:a__default["default"].glowPrimary}}),container:emotion.css({backgroundColor:a__default["default"].colorWhite,borderBottom:`1px solid ${a__default["default"].gray200}`,padding:t?0:a__default["default"].spacingS,textAlign:e,color:a__default["default"].gray700,fontWeight:o?a__default["default"].fontWeightMedium:a__default["default"].fontWeightNormal,verticalAlign:l}),sortIcon:p=>emotion.css({fill:a__default["default"].gray400,opacity:p?1:0,transition:`opacity ${a__default["default"].transitionEasingCubicBezier} ${a__default["default"].transitionDurationDefault}`})});function Pe(e){return P.isValidElement(e)&&Boolean(e.props.children)}function g(e){let t="";return P.Children.toArray(e).map(o=>{P.isValidElement(o)&&Pe(o)?t+=g(o.props.children):(typeof o=="string"||typeof o=="number")&&(t=`${t}${o}`);}),t}var X=(o=>(o.Ascending="ascending",o.Descending="descending",o))(X||{}),ve={["ascending"]:f36Icons.SortAscendingIcon,["descending"]:f36Icons.SortDescendingIcon};function j(m,T){var b=m,{align:e="left",children:t,className:o,isSortable:r,sortDirection:l,testId:p="cf-ui-table-cell"}=b,i=d(b,["align","children","className","isSortable","sortDirection","testId"]);let[y,x]=P.useState(!1),{as:Z,name:ee,offsetTop:oe}=M(),{verticalAlign:te}=K(),re=ve[l],S=ee==="head",B=_({isSortable:S?r:void 0,sortDirection:l,isTableHead:S,align:e,verticalAlign:te}),le=S?f36Typography.Caption:f36Typography.Text,ae=r?{"aria-sort":l!=null?l:"none",onBlur:()=>x(!1),onFocus:()=>x(!0),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)}:{},ne=P.useMemo(()=>g(t),[t]),L=t;return r&&(L=P__default["default"].createElement("button",{"aria-label":`Sort ${l==="ascending"?"descending":"ascending"} by ${ne}`,className:B.button,type:"button"},t,l?P__default["default"].createElement(re,{size:"tiny",variant:"secondary"}):P__default["default"].createElement(f36Icons.SortIcon,{"aria-hidden":!y,className:B.sortIcon(y),size:"tiny",variant:"secondary"}))),P__default["default"].createElement(le,s(n(n({},i),ae),{as:Z,className:emotion.cx(B.container,o),ref:T,style:s(n({},i.style),{top:oe||void 0}),testId:p}),L)}j.displayName="TableCell";var k=P.forwardRef(j);var q=()=>({sticky:emotion.css({th:{position:"sticky",top:0,zIndex:a__default["default"].zIndexDefault}})});var h=P.forwardRef((T,i)=>{var m=T,{children:e,className:t,isSticky:o=!1,offsetTop:r,testId:l="cf-ui-table-head"}=m,p=d(m,["children","className","isSticky","offsetTop","testId"]);let b=q(),y=emotion.cx(o&&b.sticky,t);return P__default["default"].createElement(v,{value:s(n({},u.head),{offsetTop:r||0})},P__default["default"].createElement(f36Core.Box,s(n({},p),{as:"thead",className:y,ref:i,testId:l}),e))});h.displayName="TableHead";var Y=()=>({root:emotion.css({"&:last-child td":{borderBottom:"none"},"&:hover td":{backgroundColor:a__default["default"].gray100}}),selected:emotion.css({"td, th":{backgroundColor:a__default["default"].blue100},"td:last-child":{boxShadow:`inset -2px 0 0 ${a__default["default"].blue500}`}})});var R=P.forwardRef((i,p)=>{var T=i,{className:e,children:t,isSelected:o=!1,testId:r="cf-ui-table-row"}=T,l=d(T,["className","children","isSelected","testId"]);let m=Y();return P__default["default"].createElement(f36Core.Box,s(n({},l),{as:"tr",className:emotion.cx(m.root,{[m.selected]:o},e),ref:p,testId:r}),t)});R.displayName="TableRow";var f=E;f.Row=R;f.Head=h;f.Cell=k;f.Body=H;

exports.Table = f;
exports.TableBody = H;
exports.TableCell = k;
exports.TableCellContext = I;
exports.TableCellContextProvider = v;
exports.TableCellSorting = X;
exports.TableHead = h;
exports.TableRow = R;
exports.contextOptions = u;
exports.useTableCellContext = M;
//# sourceMappingURL=index.js.map