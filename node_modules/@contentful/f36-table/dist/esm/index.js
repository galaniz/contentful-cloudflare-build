import { cx, css } from 'emotion';
import P, { createContext, forwardRef, useContext, useState, useMemo, Children, isValidElement } from 'react';
import { Box } from '@contentful/f36-core';
import a from '@contentful/f36-tokens';
import { Caption, Text } from '@contentful/f36-typography';
import { SortIcon, SortAscendingIcon, SortDescendingIcon } from '@contentful/f36-icons';

var se=Object.defineProperty,pe=Object.defineProperties;var ie=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var $=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var W=(e,t,o)=>t in e?se(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,n=(e,t)=>{for(var o in t||(t={}))$.call(t,o)&&W(e,o,t[o]);if(C)for(var o of C(t))O.call(t,o)&&W(e,o,t[o]);return e},s=(e,t)=>pe(e,ie(t));var d=(e,t)=>{var o={};for(var r in e)$.call(e,r)&&t.indexOf(r)<0&&(o[r]=e[r]);if(e!=null&&C)for(var r of C(e))t.indexOf(r)<0&&O.call(e,r)&&(o[r]=e[r]);return o};var z=()=>({inline:css({borderRadius:a.borderRadiusMedium,boxShadow:`0 0 0 1px ${a.gray200}`,"th:first-child":{borderTopLeftRadius:a.borderRadiusMedium},"th:last-child":{borderTopRightRadius:a.borderRadiusMedium},"tr:last-child td:first-child":{borderBottomLeftRadius:a.borderRadiusMedium},"tr:last-child td:last-child":{borderBottomRightRadius:a.borderRadiusMedium}}),embedded:css({borderBottom:`1px solid ${a.gray200}`}),root:css({width:"100%"})});var F=createContext({}),K=()=>useContext(F),G=F.Provider;var E=forwardRef((T,i)=>{var m=T,{children:e,className:t,layout:o="inline",testId:r="cf-ui-table",verticalAlign:l="top"}=m,p=d(m,["children","className","layout","testId","verticalAlign"]);let b=z();return P.createElement(Box,s(n({cellPadding:"0",cellSpacing:"0"},p),{as:"table",display:"table",ref:i,className:cx(b.root,b[o],t),testId:r}),P.createElement(G,{value:{verticalAlign:l}},e))});E.displayName="Table";function V(p,l){var i=p,{className:e,children:t,testId:o="cf-ui-table-body"}=i,r=d(i,["className","children","testId"]);return P.createElement(Box,s(n({},r),{as:"tbody",className:e,ref:l,testId:o}),t)}V.displayName="TableBody";var H=forwardRef(V);var u={body:{name:"body",as:"td",offsetTop:0},head:{name:"head",as:"th",offsetTop:0}},I=createContext(u.body),M=()=>useContext(I),v=I.Provider;var _=({align:e,isSortable:t,isTableHead:o,sortDirection:r,verticalAlign:l})=>({button:css({alignItems:"flex-start",appearance:"none",background:"none",border:0,color:r?a.gray900:"inherit",cursor:"pointer",display:"inline-flex",gap:a.spacing2Xs,outline:0,padding:a.spacingS,"&:focus":{backgroundColor:a.gray100,boxShadow:a.glowPrimary},"&:focus:not(:focus-visible)":{backgroundColor:"unset",boxShadow:"unset"},"&:focus-visible":{backgroundColor:a.gray100,boxShadow:a.glowPrimary}}),container:css({backgroundColor:a.colorWhite,borderBottom:`1px solid ${a.gray200}`,padding:t?0:a.spacingS,textAlign:e,color:a.gray700,fontWeight:o?a.fontWeightMedium:a.fontWeightNormal,verticalAlign:l}),sortIcon:p=>css({fill:a.gray400,opacity:p?1:0,transition:`opacity ${a.transitionEasingCubicBezier} ${a.transitionDurationDefault}`})});function Pe(e){return isValidElement(e)&&Boolean(e.props.children)}function g(e){let t="";return Children.toArray(e).map(o=>{isValidElement(o)&&Pe(o)?t+=g(o.props.children):(typeof o=="string"||typeof o=="number")&&(t=`${t}${o}`);}),t}var X=(o=>(o.Ascending="ascending",o.Descending="descending",o))(X||{}),ve={["ascending"]:SortAscendingIcon,["descending"]:SortDescendingIcon};function j(m,T){var b=m,{align:e="left",children:t,className:o,isSortable:r,sortDirection:l,testId:p="cf-ui-table-cell"}=b,i=d(b,["align","children","className","isSortable","sortDirection","testId"]);let[y,x]=useState(!1),{as:Z,name:ee,offsetTop:oe}=M(),{verticalAlign:te}=K(),re=ve[l],S=ee==="head",B=_({isSortable:S?r:void 0,sortDirection:l,isTableHead:S,align:e,verticalAlign:te}),le=S?Caption:Text,ae=r?{"aria-sort":l!=null?l:"none",onBlur:()=>x(!1),onFocus:()=>x(!0),onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1)}:{},ne=useMemo(()=>g(t),[t]),L=t;return r&&(L=P.createElement("button",{"aria-label":`Sort ${l==="ascending"?"descending":"ascending"} by ${ne}`,className:B.button,type:"button"},t,l?P.createElement(re,{size:"tiny",variant:"secondary"}):P.createElement(SortIcon,{"aria-hidden":!y,className:B.sortIcon(y),size:"tiny",variant:"secondary"}))),P.createElement(le,s(n(n({},i),ae),{as:Z,className:cx(B.container,o),ref:T,style:s(n({},i.style),{top:oe||void 0}),testId:p}),L)}j.displayName="TableCell";var k=forwardRef(j);var q=()=>({sticky:css({th:{position:"sticky",top:0,zIndex:a.zIndexDefault}})});var h=forwardRef((T,i)=>{var m=T,{children:e,className:t,isSticky:o=!1,offsetTop:r,testId:l="cf-ui-table-head"}=m,p=d(m,["children","className","isSticky","offsetTop","testId"]);let b=q(),y=cx(o&&b.sticky,t);return P.createElement(v,{value:s(n({},u.head),{offsetTop:r||0})},P.createElement(Box,s(n({},p),{as:"thead",className:y,ref:i,testId:l}),e))});h.displayName="TableHead";var Y=()=>({root:css({"&:last-child td":{borderBottom:"none"},"&:hover td":{backgroundColor:a.gray100}}),selected:css({"td, th":{backgroundColor:a.blue100},"td:last-child":{boxShadow:`inset -2px 0 0 ${a.blue500}`}})});var R=forwardRef((i,p)=>{var T=i,{className:e,children:t,isSelected:o=!1,testId:r="cf-ui-table-row"}=T,l=d(T,["className","children","isSelected","testId"]);let m=Y();return P.createElement(Box,s(n({},l),{as:"tr",className:cx(m.root,{[m.selected]:o},e),ref:p,testId:r}),t)});R.displayName="TableRow";var f=E;f.Row=R;f.Head=h;f.Cell=k;f.Body=H;

export { f as Table, H as TableBody, k as TableCell, I as TableCellContext, v as TableCellContextProvider, X as TableCellSorting, h as TableHead, R as TableRow, u as contextOptions, M as useTableCellContext };
//# sourceMappingURL=index.js.map